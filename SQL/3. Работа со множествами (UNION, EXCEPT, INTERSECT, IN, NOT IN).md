## Заметка
Все сложные слова со сноской находятся в словаре. Ссылка на [[Словарь]]

В SQL операторы для работы  множествами позволяют объединить результаты запросов, исключать одни результаты из других или находит пересечения данных. Вот основные операторы работы с множествами: UNION, EXCEPT, INTERSECT, IN и NOT IN.

---
## UNION
Оператор UNION используется для объединения результатов двух или более запросов.

Он возвращает все строки которые были выбраны в любом из запросов. Дубликаты удаляются, чтобы каждая строка в результирующем наборе была уникальной. Если необходимо сохранить дубликаты, используется оператор 
UNION ALL. 

```SQL
-- Этот запрос объединяет имена и отделы сотрудников из таблиц 'employees_sales' и 'employees_marketing'
SELECT name, department FROM employees_sales
UNION
SELECT name, department FROM employees_marketing
```
---
## EXCEPT
Оператор EXCEPT возвращает строки, которые присутствуют в первом запросе, но отсутствуют во втором.

Он используется, чтобы исключить определенные записи из набора данных.

```SQL
-- Этот запрос возвращает имена сотрудников, которые работают в отделе продаж ('employees_sales'), но не работают в отделе маркетинга ('employees_marketing')
SELECT name FROM employees_sales
EXCEPT
SELECT name FROM employees_marketing;
```
---
## INTERSECT
Оператор INTERSECT используется для получения пересечения двух запросов, то есть строк, которые присутствуют в обоих запросах. Только те строки, которые есть в обоих результирующих наборах, попадают в окончательный результат.

```SQL
-- Этот запрос возвращает имена сотрудников, которые работают и в отделе продаж и в отделе маркетинга
SELECT name FROM employees_sales
INTERSECT
SELECT name FROM employees_marketing
```
--- 
## IN
Оператор ШТ используется для проверки того, содержится ли значение в указанном множестве значений или подзапросе. Если значение содержится в множестве, условие возвращает TRUE.

```SQL
-- Этот запрос возвращает имена и отделы сотрудников, которые работают в отделах Sales или Marketing
SELECT name, department FROM employees
WHERE department IN ('Sales','Marketing');
```

Также IN может использоваться с подзапросом:

```SQL
-- Этот запрос возвращает имена сотрудников, работающих в отделах, расположенных в Нью-Йорке
SELECT name FROM employees
WHERE department_id IN (SELECT id FROM departments
					   WHERE location = 'New York');
```
---
## NOT IN
Оператор NOT IN используется для проверки того, что значение не содержится в указанном множестве значений или подзапросе. Если значение не содержится в множестве, условие возвращает TRUE.

```SQL
-- Этот запрос возвращает имена и отделы сотрудников, которые не работают в отделах Sales и Marketing
SELECT name, department FROM employees
WHERE department NOT IN ('Sales', 'Marketing')
```
Также NOT IN может использоваться с подзапросом:

```SQL
SELECT name FROM employees 
WHERE department_id NOT IN (SELECT id 
							FROM departments
							WHERE location='New York' );
```
Этот запрос возвращает имена сотрудников которые работают в отделах, не расположенных в Нью-Йорке

---
## Общие замечания

+ Для работы операторов UNION, EXCEPT, INTERSECT важно, чтобы **количество и типы столбцов в результатах обоих запросов совпадали**.

+ Операторы IN, NOT IN полезны для **фильтрации данных по множествам значений**, как статическим, так и динамическим создаваемым с помощью подзапросов.



