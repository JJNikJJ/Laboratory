## Заметка
Все сложные слова со сноской находятся в словаре. Ссылка на [[Словарь]]

В SQL значение NULL обозначает отсутствие данных или неопределенное значение.
Работа с NULL требует особого подхода поскольку NULL не эквивалентен пустой строке, нулю или другим значениям. Он представляет собой отдельное состояние, которое нужно учитывать при выполнении операций с данными. Рассмиотрим использование NULL в различных SQL-конструкциях.

## Проверка на NULL: IS NULL и IS NOT NULL
+ IS NULL используется для проверки, содержит ли столбец значение NULL.
+ IS NOT NULL используется для проверки, содержит ли столбец любое значение, кроме NULL.
```SQL
--Этот запрос возвращает всех сотрудников, у которых нет менеджера (т.е. поле manager_id равно NULL)
SELECT * FROM employeers WHERE manager_id IS NULL;
```

```SQL
-- Этот запрос возвращает всех сотрудников у которых есть менеджер (т.е. поле manager_id не равно NULL)
SELECT * FROM employeers WHERE manager_id IS NOT NULL;
```
## Сравнение с NULL
Сравнение значения с NULL с использованием стандартных операторов сравнения ('=', '<>', '>', '<' и т.д.) не работает так, как с обычными значениями. Любое сравнение с NULL всегда возвращает 'UNKNOWN' (неопределенное значение).

## Использование COALESCE
COALESCE - это функция, которая возвращает первое не-"NULL" значение из списка аргументов. Она полезна, когда нужно заменить NULL значением по умолчанию.
```SQL
-- этот запрос возвращает идентификатор менеджера для каждого сотрудника, заменяя NULL значением 0
SELECT name, COALESCE(manager_id, 0) AS manager_id
FROM employees;
```

## Использование NULLIF
Nullif принимает два аргумента и возвращает NULL, если они равны. Если они не равны, функция возвращает первый аргумент.
```SQL
-- этот запрос возвращает NULL, если зарплата сотрудника равна нулю, и саму зарплату в других случаях.
SELECT NULLIF(salary, 0) AS adjusted_salary
FROM employeers
```

## Агрегатные функции и NULL
Большинство агрегатных функций таких как SUM, AVG, COUNT, игнорируют NULL значения при вычислениях. Однако есть несколько нюансов:
+ COUNT(column_name) - считает количество непустых (не-NULL) значений в столбце.
```SQL
-- возвращает количество сотрудников, у которых есть менеджер
SELECT COUNT(manager_id) FROM employeers;
```
+ COUNT( * ) - считает все строки, включая строки с NULL-значениями.
```SQL
-- возвращает общее количество сотрудников, включая тех, у кого manager_id равно NULL
SELECT COUNT(*) FROM employeers
```
+ SUM, AVG, MAX, MIN - игнорируют NULL Значения.
```SQL
-- Возвращает среднюю зарплату для всех сотрудников, у которых указан отдел.
SELECT AVG(salary) FROM employeers WHERE department_id IS NOT NULL;
```
## Использование CASE с NULL
Оператор CASE часто используется для обработки NULL значений, особенно, если необходимо выполнить разные действия в зависимости от того является ли значение NULL.
```SQL
-- Этот запрос возвращает статус менеджера для каждого сотрудника, заменяя NULL на No MAnager
SELECT name
	CASE
		WHEN manager_id IS NULL THEN 'No manager'
		ELSE 'Has Manager'
	END AS manager_status
FROM employeers;
```

## Использование WHERE и NULL
Когда NULL участвует в условии WHERE, важно помнить о правильности его проверки.
```SQL
-- этот запрос вернет всех сотрудников, у которых зарплата не указана (т.е. равно NULL)
SELECT * FROM employeers WHERE salary IS NULL
```

```SQL
-- Этот запрос возвращает всех сотрудников, у которых зарплата равна нулю или не указана.
SELECT * FROM employeers WHERE salary = 0 OR salary IS NULL
```

Работа с NULL требует понимания его уникальных особенностей в SQL. Правильное использование конструкций, таких как "IS NULL", "COALESCE", "CASE" и агрегатных функций позволяет эффективно управлять данными и учитывать случаи отсутствия значений в базе данных.