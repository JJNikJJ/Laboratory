## Заметка
Все сложные слова со сноской находятся в словаре. Ссылка на [[Словарь]]
#### Основы DML (Data Manipulation Language) операций: INSERT, UPDATE, DELETE

**DML** (язык манипуляции данными) включает команды, которые используются для управления данными в таблицах баз данных.

1. **INSERT**: Команда используется для вставки новых строк в таблицу. 

   **Пример:**
   ```sql
   INSERT INTO employees (name, department, salary)
   VALUES ('Jane Doe', 'HR', 55000);
   ```
   Этот запрос добавляет новую запись в таблицу `employees`.

2. **UPDATE**: Команда используется для изменения существующих данных в таблице. 

   **Пример:**
   ```sql
   UPDATE employees
   SET salary = salary * 1.10
   WHERE department = 'HR';
   ```
   Этот запрос увеличивает зарплату на 10% для всех сотрудников в отделе HR.

3. **DELETE**: Команда используется для удаления данных из таблицы. 

   **Пример:**
   ```sql
   DELETE FROM employees WHERE salary < 30000;
   ```
   Этот запрос удаляет всех сотрудников, у которых зарплата ниже 30000.

#### Основы DDL (Data Definition Language) операций: CREATE, ALTER, DROP

**DDL** (язык определения данных) используется для создания и изменения структуры объектов базы данных.

1. **CREATE**: Команда используется для создания новых объектов базы данных, таких как таблицы и индексы.

   **Пример:**
   ```sql
   CREATE TABLE departments (
       id INT PRIMARY KEY,
       name VARCHAR(100)
   );
   ```
   Этот запрос создает новую таблицу `departments`.

2. **ALTER**: Команда используется для изменения структуры существующих объектов базы данных, например, добавления нового столбца.

   **Пример:**
   ```sql
   ALTER TABLE employees ADD COLUMN hire_date DATE;
   ```
   Этот запрос добавляет новый столбец `hire_date` в таблицу `employees`.

3. **DROP**: Команда используется для удаления объектов базы данных, таких как таблицы.

   **Пример:**
   ```sql
   DROP TABLE employees;
   ```
   Этот запрос удаляет таблицу `employees`.

#### Основы DCL (Data Control Language) операций: GRANT, REVOKE

**DCL** (язык управления данными) используется для управления правами доступа к объектам базы данных.

1. **GRANT**: Команда используется для предоставления прав пользователю или роли на выполнение определенных операций.

   **Пример:**
   ```sql
   GRANT SELECT, INSERT ON employees TO user1;
   ```
   Этот запрос предоставляет пользователю `user1` права на выборку и вставку данных в таблицу `employees`.

2. **REVOKE**: Команда используется для отзыва ранее предоставленных прав.

   **Пример:**
   ```sql
   REVOKE INSERT ON employees FROM user1;
   ```
   Этот запрос отбирает у пользователя `user1` право на вставку данных в таблицу `employees`.

#### Основы TCL (Transaction Control Language) операций: COMMIT, ROLLBACK

**TCL** (язык управления транзакциями) используется для управления транзакциями, обеспечивая целостность и согласованность данных.

1. **COMMIT**: Команда фиксирует все изменения, сделанные в рамках текущей транзакции.

   **Пример:**
   ```sql
   BEGIN TRANSACTION;
   UPDATE employees SET salary = salary * 1.05 WHERE department = 'Finance';
   COMMIT;
   ```
   Этот запрос увеличивает зарплату на 5% для всех сотрудников в отделе финансов и фиксирует изменения.

2. **ROLLBACK**: Команда отменяет все изменения, сделанные в рамках текущей транзакции.

   **Пример:**
   ```sql
   BEGIN TRANSACTION;
   DELETE FROM employees WHERE department = 'Sales';
   ROLLBACK;
   ```
   Этот запрос удаляет всех сотрудников из отдела продаж, но затем откатывает изменения.

### Продвинутое использование DML

#### Объединение таблиц и подзапросы

**Объединение таблиц** с помощью операторов `JOIN` и использование подзапросов позволяет создавать сложные SQL-запросы для работы с данными из нескольких таблиц.

1. **JOIN**: Объединяет строки из двух или более таблиц на основе связанного столбца.

   **Пример:**
   ```sql
   SELECT e.name, d.name AS department_name
   FROM employees e
   JOIN departments d ON e.department_id = d.id;
   ```
   Этот запрос возвращает список сотрудников и их отделов.

2. **Подзапросы**: Запросы внутри других SQL-запросов, которые могут возвращать одно значение, множество значений или даже целую таблицу.

   **Пример:**
   ```sql
   SELECT name FROM employees WHERE salary > (SELECT AVG(salary) FROM employees);
   ```
   Этот запрос выбирает всех сотрудников, чья зарплата выше средней по компании.

### Изменение структуры существующих таблиц с помощью DDL

**Изменение структуры таблиц** позволяет адаптировать базу данных к новым требованиям.

1. **ALTER**: Используется для добавления, изменения или удаления столбцов, а также изменения других аспектов структуры таблицы.

   **Пример:**
   ```sql
   ALTER TABLE employees DROP COLUMN hire_date;
   ```
   Этот запрос удаляет столбец `hire_date` из таблицы `employees`.

### Управление доступом и безопасностью данных с помощью DCL

**Управление доступом** к данным включает назначение прав доступа пользователям и ролям для защиты данных.

1. **Уровни доступа**: Право на выполнение операций SELECT, INSERT, UPDATE, DELETE и других.
2. **Доступные сущности**: Таблицы, представления, процедуры, функции и другие объекты базы данных.

   **Пример:**
   ```sql
   GRANT SELECT ON employees TO analyst_role;
   ```
   Этот запрос предоставляет роли `analyst_role` право на выборку данных из таблицы `employees`.

### Реализация внешних ключей и каскадных операций

**Внешние ключи** используются для обеспечения ссылочной целостности между таблицами.

1. **Каскадные операции**: Позволяют автоматически обновлять или удалять строки, связанные с изменяемыми или удаляемыми записями.

   **Пример:**
   ```sql
   CREATE TABLE orders (
       order_id INT PRIMARY KEY,
       customer_id INT,
       CONSTRAINT fk_customer
           FOREIGN KEY (customer_id) 
           REFERENCES customers(id)
           ON DELETE CASCADE
   );
   ```
   Этот запрос создает таблицу `orders` с внешним ключом `customer_id`, который каскадно удаляет заказы при удалении записи из таблицы `customers`.

### Создание хранимых процедур и сложных операций с данными

**Хранимые процедуры** позволяют сохранять сложные операции с данными в базе для повторного использования.

1. **Хранимая процедура**: Набор SQL-команд, сохраняемый на сервере базы данных и выполняемый по мере необходимости.

   **Пример:**
   ```sql
   CREATE PROCEDURE update_salary(dept_name VARCHAR(50), increment DECIMAL(5,2))
   BEGIN
       UPDATE employees SET salary = salary * (1 + increment/100) WHERE department = dept_name;
   END;
   ```
   Этот запрос создает хранимую процедуру, которая увеличивает зарплату сотрудников указанного отдела на определенный процент.

### Настройка репликации данных и управление версиями схем баз данных

**Репликация данных** и **управление версиями схем** позволяют поддерживать согласованность данных и структур базы в распределенных системах.

1. **Репликация данных**: Копирование и синхронизация данных между несколькими серверами для повышения доступности и отказоустойчивости.

2. **Управление версиями схем**: Практика ведения версионного контроля изменений структуры базы данных с использованием миграций.

   **Пример настройки репликации в PostgreSQL:**
   ```sql
   ALTER SYSTEM SET wal_level = 'logical';
   ```

### Интеграция SQL-запросов с Python и автоматическое шифрование данных

**Интеграция SQL с Python** позволяет автоматизировать выполнение запросов и управлять данными программно, а **шифрование данных** защищает данные от несанкционированного доступа.

1. **Пример интеграции SQL с Python:**

   ```python
   import psycopg2

   conn = psycopg2.connect("dbname=test user=postgres password=secret")
   cur = conn.cursor()
   cur.execute("SELECT * FROM employees WHERE department = %s", ('IT',))
   rows = cur.fetchall()
   for row in rows:
       print(row)
   conn.close()
   ```

2. **Автоматическое шифрование данных**: Используется для защиты конфиденциальной информации, хранящейся в базе данных.

   **Пример шифрования данных в MySQL:**

   ```sql
   CREATE TABLE customers (
       customer_id INT PRIMARY KEY,
       customer_name VARCHAR(100) ENCRYPTED,
       credit_card_number VARCHAR(16) ENCRYPTED
   );
   ```

---

Эти темы обеспечивают полное понимание работы

 с SQL, начиная от базовых операций манипуляции данными и заканчивая продвинутыми аспектами управления доступом, репликацией и интеграцией с программными приложениями.